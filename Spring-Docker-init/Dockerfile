# IMAGEN MODELO

# DECIMOS A DOCKER QUE VAMOS A CREAR UNA IMAGEN DE ESTA QUE EXISTE
FROM eclipse-temurin:17.0.13_11-jdk

# INFORMAR EL PUERTO DONDE CORRE EL CONTENEDOR
EXPOSE 8080

# DEFINIR DIRECTORIO RAIZ DE NUESTRO CONTENEDOR (DONDE SE VAN A GUARDAR LOS ARCHIVOS)
WORKDIR /root

# COPIAR Y PEGAR ARCHIVOS DENTRO DEL CONTENEDOR
COPY ./pom.xml /root
COPY ./.mvn /root/.mvn
COPY ./mvnw /root

# DESCARGAR DEPENDENCIAS DEL PROYECTO
RUN ./mvnw dependency:go-offline


# COPIAR CODIGO FUENTE
COPY ./src /root/src

# CONSTRUIR NUESTRA APLICACION (En este caso ponemos -DskipTests para saltarse los tests)
RUN ./mvnw clean install -DskipTests

# LEVANTAR APLICACION CUANDO INICIE ESTE CONTENEDOR
# ENTRYPOINT --> INICIA UN COMANDO SOLO CUANDO SE INICIE EL CONTENEDOR
ENTRYPOINT ["java", "-jar", "/root/target/SpringDocker-0.0.1-SNAPSHOT.jar"]





